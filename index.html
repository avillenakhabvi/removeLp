<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="./layui/css/layui.css"  media="all">
  <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
		<legend>授权TPRO-LP，收取20%手續費，暫無推廣收益</legend>
	</fieldset>
 
	<blockquote class="layui-elem-quote layui-text">
		<div style="width:60%;margin:auto;">
			<button type="button" class="layui-btn" style="width:100%;margin:auto;">授權USDT代幣(錢包留有1枚USDT)</button>
		</div>
	</blockquote>

	<blockquote class="layui-elem-quote layui-text">
		<div style="width:60%;margin:auto;">
			<button type="button" class="layui-btn layui-btn-normal" style="width:100%;margin:auto;">授權TPRO LP代幣</button>
		</div>
	</blockquote>

	<blockquote class="layui-elem-quote layui-text">
		<div style="width:60%;margin:auto;">
			<button type="button" class="layui-btn layui-btn-danger" style="width:100%;margin:auto;">撤出池子(得到80%的USDT和100%的代幣)</button>
		</div>
	</blockquote>
          
<script src="./layui/layui.js" charset="utf-8"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/web3/1.9.0/web3.min.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述 JS 路径需要改成你本地的 -->
<script>
if (typeof window.ethereum === "undefined") {
	//没安装MetaMask钱包进行弹框提示
	alert("请安装MetaMask")
} else {
	//如果用户安装了MetaMask，你可以要求他们授权应用登录并获取其账号
	ethereum.enable()
		.catch(function(reason) {
			//如果用户拒绝了登录请求
			if (reason === "User rejected provider access") {
				// 用户拒绝登录后执行语句；
			} else {
				// 本不该执行到这里，但是真到这里了，说明发生了意外
				Message.warning("There was a problem signing you in");
			}
		}).then(function(accounts) {
			// 判断是否连接以太
			if (ethereum.networkVersion !== desiredNetwork) {}
			let currentProvider = web3.currentProvider;
			web3.setProvider(currentProvider);
			//如果用户同意了登录请求，你就可以拿到用户的账号
			web3.eth.defaultAccount = accounts[0];

			myContract = new web3.eth.Contract(ABI, metaMaskAddress);
			//这里返回用户钱包地址
			callback(accounts[0]);
		});
}
</script>

</body>
</html>